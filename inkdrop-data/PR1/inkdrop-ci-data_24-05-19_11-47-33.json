{"planJson":{"resource_changes":[{"address":"aws_autoscaling_attachment.three-tier-web-asattach","mode":"managed","type":"aws_autoscaling_attachment","name":"three-tier-web-asattach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"autoscaling_group_name":"three-tier-web-asg","elb":null},"after_unknown":{"id":true,"lb_target_group_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_autoscaling_group.three-tier-web-asg","mode":"managed","type":"aws_autoscaling_group","name":"three-tier-web-asg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity":3,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"max_instance_lifetime":null,"max_size":10,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":2,"name":"three-tier-web-asg","placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true}],"termination_policies":null,"timeouts":null,"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"after_unknown":{"arn":true,"availability_zones":true,"default_cooldown":true,"health_check_type":true,"id":true,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":true,"launch_template":true,"load_balancers":true,"mixed_instances_policy":true,"name_prefix":true,"predicted_capacity":true,"service_linked_role_arn":true,"tag":[{"value":true}],"target_group_arns":true,"traffic_source":true,"vpc_zone_identifier":true,"warm_pool":[],"warm_pool_size":true},"before_sensitive":false,"after_sensitive":{"availability_zones":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[],"load_balancers":[],"mixed_instances_policy":[],"tag":[{}],"target_group_arns":[],"traffic_source":[],"vpc_zone_identifier":[],"warm_pool":[]}}},{"address":"aws_eip.three-tier-nat-eip","mode":"managed","type":"aws_eip","name":"three-tier-nat-eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":null,"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags_all":true,"vpc":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_internet_gateway.three-tier-igw","mode":"managed","type":"aws_internet_gateway","name":"three-tier-igw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"three-tier-nhvr-igw"},"tags_all":{"Name":"three-tier-nhvr-igw"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_launch_configuration.three-tier-web-lconfig","mode":"managed","type":"aws_launch_configuration","name":"three-tier-web-lconfig","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"associate_public_ip_address":true,"enable_monitoring":true,"ephemeral_block_device":[],"iam_instance_profile":null,"image_id":"ami-03aa885dc6576ab5f","instance_type":"t2.micro","key_name":"tfc-demo","name_prefix":"three-tier-web-lconfig","placement_tenancy":null,"spot_price":null,"user_data":"0cb51576929b62895f16a1d4caec7c092bbd0fe8","user_data_base64":null},"after_unknown":{"arn":true,"ebs_block_device":true,"ebs_optimized":true,"ephemeral_block_device":[],"id":true,"metadata_options":true,"name":true,"root_block_device":true,"security_groups":true},"before_sensitive":false,"after_sensitive":{"ebs_block_device":[],"ephemeral_block_device":[],"metadata_options":[],"root_block_device":[],"security_groups":[]}}},{"address":"aws_lb.three-tier-app-lb","mode":"managed","type":"aws_lb","name":"three-tier-app-lb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"internal":true,"load_balancer_type":"application","name":"three-tier-app-lb","preserve_host_header":false,"tags":{"Environment":"three-tier-app-lb"},"tags_all":{"Environment":"three-tier-app-lb"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"name_prefix":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"aws_lb.three-tier-web-lb","mode":"managed","type":"aws_lb","name":"three-tier-web-lb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"internal":false,"load_balancer_type":"application","name":"three-tier-web-lb","preserve_host_header":false,"tags":{"Environment":"three-tier-web-lb"},"tags_all":{"Environment":"three-tier-web-lb"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"name_prefix":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"aws_lb_listener.three-tier-app-lb-listner","mode":"managed","type":"aws_lb_listener","name":"three-tier-app-lb-listner","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"ssl_policy":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"aws_lb_listener.three-tier-web-lb-listner","mode":"managed","type":"aws_lb_listener","name":"three-tier-web-lb-listner","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"ssl_policy":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"aws_lb_target_group.three-tier-app-lb-tg","mode":"managed","type":"aws_lb_target_group","name":"three-tier-app-lb-tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"path":"/","port":"traffic-port","protocol":"HTTP","timeout":10,"unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"three-tier-app-lb-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{"matcher":true}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags_all":true,"target_failover":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags_all":{},"target_failover":[],"target_health_state":[]}}},{"address":"aws_lb_target_group.three-tier-web-lb-tg","mode":"managed","type":"aws_lb_target_group","name":"three-tier-web-lb-tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"path":"/","port":"traffic-port","protocol":"HTTP","timeout":10,"unhealthy_threshold":3}],"lambda_multi_value_headers_enabled":false,"name":"three-tier-web-lb-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":null,"target_type":"instance"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{"matcher":true}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags_all":true,"target_failover":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags_all":{},"target_failover":[],"target_health_state":[]}}},{"address":"aws_nat_gateway.three-tier-natgw-01","mode":"managed","type":"aws_nat_gateway","name":"three-tier-natgw-01","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"three-tier-nhvr-natgw-01"},"tags_all":{"Name":"three-tier-nhvr-natgw-01"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"aws_route_table.three-tier-app-rt","mode":"managed","type":"aws_route_table","name":"three-tier-app-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"three-tier-nhvr-app-rt"},"tags_all":{"Name":"three-tier-nhvr-app-rt"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_route_table.three-tier-web-rt","mode":"managed","type":"aws_route_table","name":"three-tier-web-rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"three-tier-nhvr-web-rt"},"tags_all":{"Name":"three-tier-nhvr-web-rt"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_route_table_association.three-tier-rt-as-1","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.three-tier-rt-as-2","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.three-tier-rt-as-3","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.three-tier-rt-as-4","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-4","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.three-tier-rt-as-5","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-5","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.three-tier-rt-as-6","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-6","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_security_group.three-tier-alb-sg-1","mode":"managed","type":"aws_security_group","name":"three-tier-alb-sg-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"load balancer security group for web tier","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"three-tier-alb-sg-1","revoke_rules_on_delete":false,"tags":{"Name":"three-tier-alb-sg-1"},"tags_all":{"Name":"three-tier-alb-sg-1"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.three-tier-alb-sg-2","mode":"managed","type":"aws_security_group","name":"three-tier-alb-sg-2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"load balancer security group for app tier","ingress":[{"cidr_blocks":[],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":80}],"name":"three-tier-alb-sg-2","revoke_rules_on_delete":false,"tags":{"Name":"three-tier-alb-sg-2"},"tags_all":{"Name":"three-tier-alb-sg-2"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.three-tier-db-sg","mode":"managed","type":"aws_security_group","name":"three-tier-db-sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"allow traffic from app tier","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":22},{"cidr_blocks":["10.0.0.32/28","10.0.0.48/28"],"description":"Access for the web ALB SG","from_port":3306,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":3306}],"name":"three-tier-db-sg","revoke_rules_on_delete":false,"tags":null,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true},{"cidr_blocks":[false,false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false,false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags_all":{}}}},{"address":"aws_security_group.three-tier-ec2-asg-sg","mode":"managed","type":"aws_security_group","name":"three-tier-ec2-asg-sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow traffic from VPC","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":[],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"three-tier-ec2-asg-sg","revoke_rules_on_delete":false,"tags":{"Name":"three-tier-ec2-asg-sg"},"tags_all":{"Name":"three-tier-ec2-asg-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.three-tier-ec2-asg-sg-app","mode":"managed","type":"aws_security_group","name":"three-tier-ec2-asg-sg-app","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow traffic from web tier","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"","from_port":-1,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"icmp","self":false,"to_port":-1},{"cidr_blocks":[],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":22},{"cidr_blocks":[],"description":"","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":80}],"name":"three-tier-ec2-asg-sg-app","revoke_rules_on_delete":false,"tags":{"Name":"three-tier-ec2-asg-sg-app"},"tags_all":{"Name":"three-tier-ec2-asg-sg-app"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_subnet.three-tier-pub-sub-1","mode":"managed","type":"aws_subnet","name":"three-tier-pub-sub-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-southeast-2a","cidr_block":"10.0.0.0/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"three-tier-nhvr-pub-sub-1"},"tags_all":{"Name":"three-tier-nhvr-pub-sub-1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.three-tier-pub-sub-2","mode":"managed","type":"aws_subnet","name":"three-tier-pub-sub-2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-southeast-2b","cidr_block":"10.0.0.16/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"three-tier-nhvr-pub-sub-2"},"tags_all":{"Name":"three-tier-nhvr-pub-sub-2"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.three-tier-pvt-sub-1","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-southeast-2a","cidr_block":"10.0.0.32/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"three-tier-nhvr-pvt-sub-1"},"tags_all":{"Name":"three-tier-nhvr-pvt-sub-1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.three-tier-pvt-sub-2","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-southeast-2b","cidr_block":"10.0.0.48/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"three-tier-nhvr-pvt-sub-2"},"tags_all":{"Name":"three-tier-nhvr-pvt-sub-2"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.three-tier-pvt-sub-3","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-southeast-2a","cidr_block":"10.0.0.64/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"three-tier-nhvr-pvt-sub-3"},"tags_all":{"Name":"three-tier-nhvr-pvt-sub-3"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.three-tier-pvt-sub-4","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-4","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-southeast-2b","cidr_block":"10.0.0.80/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"three-tier-nhvr-pvt-sub-4"},"tags_all":{"Name":"three-tier-nhvr-pvt-sub-4"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_vpc.three-tier-vpc","mode":"managed","type":"aws_vpc","name":"three-tier-vpc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"three-tier-vpc"},"tags_all":{"Name":"three-tier-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_dns_hostnames":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}}],"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~> 5.46.0","expressions":{"region":{"references":["var.region"]}}}},"root_module":{"outputs":{"aws-key-pair-id":{"expression":{"references":["data.aws_key_pair.tfc-demo.id","data.aws_key_pair.tfc-demo"]}},"aws-key-pair-name":{"expression":{"references":["data.aws_key_pair.tfc-demo.key_name","data.aws_key_pair.tfc-demo"]}},"aws-lb-app-dns-name":{"expression":{"references":["aws_lb.three-tier-app-lb.dns_name","aws_lb.three-tier-app-lb"]}},"aws-lb-web-dns-name":{"expression":{"references":["aws_lb.three-tier-web-lb.dns_name","aws_lb.three-tier-web-lb"]}},"aws-three-tier-alb-sg-1-id":{"expression":{"references":["aws_security_group.three-tier-alb-sg-1.id","aws_security_group.three-tier-alb-sg-1"]}},"aws-three-tier-alb-sg-2-id":{"expression":{"references":["aws_security_group.three-tier-alb-sg-2.id","aws_security_group.three-tier-alb-sg-2"]}},"aws-three-tier-app-lb-id":{"expression":{"references":["aws_lb.three-tier-app-lb.id","aws_lb.three-tier-app-lb"]}},"aws-three-tier-app-lb-listner-id":{"expression":{"references":["aws_lb_listener.three-tier-app-lb-listner.id","aws_lb_listener.three-tier-app-lb-listner"]}},"aws-three-tier-app-lb-tg-arn":{"expression":{"references":["aws_lb_target_group.three-tier-app-lb-tg.arn","aws_lb_target_group.three-tier-app-lb-tg"]}},"aws-three-tier-app-rt-id":{"expression":{"references":["aws_route_table.three-tier-app-rt.id","aws_route_table.three-tier-app-rt"]}},"aws-three-tier-db-sg-id":{"expression":{"references":["aws_security_group.three-tier-db-sg.id","aws_security_group.three-tier-db-sg"]}},"aws-three-tier-ec2-asg-sg-app-id":{"expression":{"references":["aws_security_group.three-tier-ec2-asg-sg-app.id","aws_security_group.three-tier-ec2-asg-sg-app"]}},"aws-three-tier-ec2-asg-sg-id":{"expression":{"references":["aws_security_group.three-tier-ec2-asg-sg.id","aws_security_group.three-tier-ec2-asg-sg"]}},"aws-three-tier-igw-id":{"expression":{"references":["aws_internet_gateway.three-tier-igw.id","aws_internet_gateway.three-tier-igw"]}},"aws-three-tier-nat-eip-id":{"expression":{"references":["aws_eip.three-tier-nat-eip.id","aws_eip.three-tier-nat-eip"]}},"aws-three-tier-natgw-01-id":{"expression":{"references":["aws_nat_gateway.three-tier-natgw-01.id","aws_nat_gateway.three-tier-natgw-01"]}},"aws-three-tier-pub-sub-1-id":{"expression":{"references":["aws_subnet.three-tier-pub-sub-1.id","aws_subnet.three-tier-pub-sub-1"]}},"aws-three-tier-pub-sub-2-id":{"expression":{"references":["aws_subnet.three-tier-pub-sub-2.id","aws_subnet.three-tier-pub-sub-2"]}},"aws-three-tier-pvt-sub-1-id":{"expression":{"references":["aws_subnet.three-tier-pvt-sub-1.id","aws_subnet.three-tier-pvt-sub-1"]}},"aws-three-tier-pvt-sub-2-id":{"expression":{"references":["aws_subnet.three-tier-pvt-sub-2.id","aws_subnet.three-tier-pvt-sub-2"]}},"aws-three-tier-pvt-sub-3-id":{"expression":{"references":["aws_subnet.three-tier-pvt-sub-3.id","aws_subnet.three-tier-pvt-sub-3"]}},"aws-three-tier-pvt-sub-4-id":{"expression":{"references":["aws_subnet.three-tier-pvt-sub-4.id","aws_subnet.three-tier-pvt-sub-4"]}},"aws-three-tier-vpc-id":{"expression":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"aws-three-tier-web-lb-dns-name":{"expression":{"references":["aws_lb.three-tier-web-lb.dns_name","aws_lb.three-tier-web-lb"]}},"aws-three-tier-web-lb-id":{"expression":{"references":["aws_lb.three-tier-web-lb.id","aws_lb.three-tier-web-lb"]}},"aws-three-tier-web-lb-listner-id":{"expression":{"references":["aws_lb_listener.three-tier-web-lb-listner.id","aws_lb_listener.three-tier-web-lb-listner"]}},"aws-three-tier-web-lb-tg-arn":{"expression":{"references":["aws_lb_target_group.three-tier-web-lb-tg.arn","aws_lb_target_group.three-tier-web-lb-tg"]}},"aws-three-tier-web-rt-id":{"expression":{"references":["aws_route_table.three-tier-web-rt.id","aws_route_table.three-tier-web-rt"]}}},"resources":[{"address":"aws_autoscaling_attachment.three-tier-web-asattach","mode":"managed","type":"aws_autoscaling_attachment","name":"three-tier-web-asattach","provider_config_key":"aws","expressions":{"autoscaling_group_name":{"references":["aws_autoscaling_group.three-tier-web-asg.name","aws_autoscaling_group.three-tier-web-asg"]},"lb_target_group_arn":{"references":["aws_lb_target_group.three-tier-web-lb-tg.arn","aws_lb_target_group.three-tier-web-lb-tg"]}},"schema_version":0},{"address":"aws_autoscaling_group.three-tier-web-asg","mode":"managed","type":"aws_autoscaling_group","name":"three-tier-web-asg","provider_config_key":"aws","expressions":{"desired_capacity":{"constant_value":3},"launch_configuration":{"references":["aws_launch_configuration.three-tier-web-lconfig.id","aws_launch_configuration.three-tier-web-lconfig"]},"max_size":{"constant_value":10},"min_size":{"constant_value":2},"name":{"constant_value":"three-tier-web-asg"},"tag":[{"key":{"constant_value":"Name"},"propagate_at_launch":{"constant_value":true},"value":{}}],"vpc_zone_identifier":{"references":["aws_subnet.three-tier-pub-sub-1.id","aws_subnet.three-tier-pub-sub-1","aws_subnet.three-tier-pub-sub-2.id","aws_subnet.three-tier-pub-sub-2"]}},"schema_version":1},{"address":"aws_eip.three-tier-nat-eip","mode":"managed","type":"aws_eip","name":"three-tier-nat-eip","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"}},"schema_version":0},{"address":"aws_internet_gateway.three-tier-igw","mode":"managed","type":"aws_internet_gateway","name":"three-tier-igw","provider_config_key":"aws","expressions":{"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":0},{"address":"aws_launch_configuration.three-tier-web-lconfig","mode":"managed","type":"aws_launch_configuration","name":"three-tier-web-lconfig","provider_config_key":"aws","expressions":{"associate_public_ip_address":{"constant_value":true},"image_id":{"references":["data.aws_ami.ubuntu.image_id","data.aws_ami.ubuntu"]},"instance_type":{"constant_value":"t2.micro"},"key_name":{"references":["data.aws_key_pair.tfc-demo.key_name","data.aws_key_pair.tfc-demo"]},"name_prefix":{"constant_value":"three-tier-web-lconfig"},"security_groups":{"references":["aws_security_group.three-tier-ec2-asg-sg.id","aws_security_group.three-tier-ec2-asg-sg"]},"user_data":{"constant_value":"#!/bin/bash\n\n# Update the system\nsudo yum -y update\n\n# Install Apache web server\nsudo yum -y install httpd\n\n# Start Apache web server\nsudo systemctl start httpd.service\n\n# Enable Apache to start at boot\nsudo systemctl enable httpd.service\n\n# Create index.html file with your custom HTML\nsudo echo '\n<!DOCTYPE html>\n<!--\nCopyright (c) HashiCorp, Inc.\nSPDX-License-Identifier: MPL-2.0\n-->\n\n<html>\n<head>\n    <title>Terramino</title>\n    <style>\n    html,\n    body {\n        height: 100%;\n        margin: 0;\n    }\n\n    body {\n\n        background-image: url(\"https://raw.githubusercontent.com/hashicorp/learn-terraform-circleci/master/assets/background.png\");\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    canvas {\n        border: 1px solid white;\n    }\n    </style>\n</head>\n\n<body>\n    <canvas width=\"320\" height=\"640\" id=\"game\"></canvas>\n    <script>\n    // https://tetris.fandom.com/wiki/Tetris_Guideline\n\n    // get a random integer between the range of [min,max]\n    // @see https://stackoverflow.com/a/1527820/2124254\n    function getRandomInt(min, max) {\n        min = Math.ceil(min);\n        max = Math.floor(max);\n\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n\n    // generate a new tetromino sequence\n    // @see https://tetris.fandom.com/wiki/Random_Generator\n    function generateSequence() {\n        const sequence = [\"I\", \"J\", \"L\", \"O\", \"S\", \"T\", \"Z\"];\n\n        while (sequence.length) {\n        const rand = getRandomInt(0, sequence.length - 1);\n        const name = sequence.splice(rand, 1)[0];\n        tetrominoSequence.push(name);\n        }\n    }\n\n    // get the next tetromino in the sequence\n    function getNextTetromino() {\n        if (tetrominoSequence.length === 0) {\n        generateSequence();\n        }\n\n        const name = tetrominoSequence.pop();\n        const matrix = tetrominos[name];\n\n        // I and O start centered, all others start in left-middle\n        const col = playfield[0].length / 2 - Math.ceil(matrix[0].length / 2);\n\n        // I starts on row 21 (-1), all others start on row 22 (-2)\n        const row = name === \"I\" ? -1 : -2;\n\n        return {\n        name: name, // name of the piece (L, O, etc.)\n        matrix: matrix, // the current rotation matrix\n        row: row, // current row (starts offscreen)\n        col: col // current col\n        };\n    }\n\n    // rotate an NxN matrix 90deg\n    // @see https://codereview.stackexchange.com/a/186834\n    function rotate(matrix) {\n        const N = matrix.length - 1;\n        const result = matrix.map((row, i) =>\n        row.map((val, j) => matrix[N - j][i])\n        );\n\n        return result;\n    }\n\n    // check to see if the new matrix/row/col is valid\n    function isValidMove(matrix, cellRow, cellCol) {\n        for (let row = 0; row < matrix.length; row++) {\n        for (let col = 0; col < matrix[row].length; col++) {\n            if (\n            matrix[row][col] &&\n            // outside the game bounds\n            (cellCol + col < 0 ||\n                cellCol + col >= playfield[0].length ||\n                cellRow + row >= playfield.length ||\n                // collides with another piece\n                playfield[cellRow + row][cellCol + col])\n            ) {\n            return false;\n            }\n        }\n        }\n\n        return true;\n    }\n\n    // place the tetromino on the playfield\n    function placeTetromino() {\n        for (let row = 0; row < tetromino.matrix.length; row++) {\n        for (let col = 0; col < tetromino.matrix[row].length; col++) {\n            if (tetromino.matrix[row][col]) {\n            // game over if piece has any part offscreen\n            if (tetromino.row + row < 0) {\n                return showGameOver();\n            }\n\n            playfield[tetromino.row + row][tetromino.col + col] =\n                tetromino.name;\n            }\n        }\n        }\n\n        // check for line clears starting from the bottom and working our way up\n        for (let row = playfield.length - 1; row >= 0; ) {\n        if (playfield[row].every(cell => !!cell)) {\n            // drop every row above this one\n            for (let r = row; r >= 0; r--) {\n            playfield[r] = playfield[r - 1];\n            }\n        } else {\n            row--;\n        }\n        }\n\n        tetromino = getNextTetromino();\n    }\n\n    // show the game over screen\n    function showGameOver() {\n        cancelAnimationFrame(rAF);\n        gameOver = true;\n\n        context.fillStyle = \"black\";\n        context.globalAlpha = 0.75;\n        context.fillRect(0, canvas.height / 2 - 30, canvas.width, 60);\n\n        context.globalAlpha = 1;\n        context.fillStyle = \"white\";\n        context.font = \"36px monospace\";\n        context.textAlign = \"center\";\n        context.textBaseline = \"middle\";\n        context.fillText(\"GAME OVER!\", canvas.width / 2, canvas.height / 2);\n    }\n\n    const canvas = document.getElementById(\"game\");\n    const context = canvas.getContext(\"2d\");\n    const grid = 32;\n    const tetrominoSequence = [];\n\n    // keep track of what is in every cell of the game using a 2d array\n    // tetris playfield is 10x20, with a few rows offscreen\n    const playfield = [];\n\n    // populate the empty state\n    for (let row = -2; row < 20; row++) {\n        playfield[row] = [];\n\n        for (let col = 0; col < 10; col++) {\n        playfield[row][col] = 0;\n        }\n    }\n\n    // how to draw each tetromino\n    // @see https://tetris.fandom.com/wiki/SRS\n    const tetrominos = {\n        I: [[0, 0, 0, 0], [1, 1, 1, 1], [0, 0, 0, 0], [0, 0, 0, 0]],\n        J: [[1, 0, 0], [1, 1, 1], [0, 0, 0]],\n        L: [[0, 0, 1], [1, 1, 1], [0, 0, 0]],\n        O: [[1, 1], [1, 1]],\n        S: [[0, 1, 1], [1, 1, 0], [0, 0, 0]],\n        Z: [[1, 1, 0], [0, 1, 1], [0, 0, 0]],\n        T: [[0, 1, 0], [1, 1, 1], [0, 0, 0]]\n    };\n\n    // color of each tetromino\n    const colors = {\n        I: \"#623CE4\",\n        O: \"#7C8797\",\n        T: \"#00BC7F\",\n        S: \"#CA2171\",\n        Z: \"#1563ff\",\n        J: \"#00ACFF\",\n        L: \"white\"\n    };\n\n    let count = 0;\n    let tetromino = getNextTetromino();\n    let rAF = null; // keep track of the animation frame so we can cancel it\n    let gameOver = false;\n\n    // game loop\n    function loop() {\n        rAF = requestAnimationFrame(loop);\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        // draw the playfield\n        for (let row = 0; row < 20; row++) {\n        for (let col = 0; col < 10; col++) {\n            if (playfield[row][col]) {\n            const name = playfield[row][col];\n            context.fillStyle = colors[name];\n\n            // drawing 1 px smaller than the grid creates a grid effect\n            context.fillRect(col * grid, row * grid, grid - 1, grid - 1);\n            }\n        }\n        }\n\n        // draw the active tetromino\n        if (tetromino) {\n        // tetromino falls every 35 frames\n        if (++count > 35) {\n            tetromino.row++;\n            count = 0;\n\n            // place piece if it runs into anything\n            if (!isValidMove(tetromino.matrix, tetromino.row, tetromino.col)) {\n            tetromino.row--;\n            placeTetromino();\n            }\n        }\n\n        context.fillStyle = colors[tetromino.name];\n\n        for (let row = 0; row < tetromino.matrix.length; row++) {\n            for (let col = 0; col < tetromino.matrix[row].length; col++) {\n            if (tetromino.matrix[row][col]) {\n                // drawing 1 px smaller than the grid creates a grid effect\n                context.fillRect(\n                (tetromino.col + col) * grid,\n                (tetromino.row + row) * grid,\n                grid - 1,\n                grid - 1\n                );\n            }\n            }\n        }\n        }\n    }\n\n    // listen to keyboard events to move the active tetromino\n    document.addEventListener(\"keydown\", function(e) {\n        if (gameOver) return;\n\n        // left and right arrow keys (move)\n        if (e.which === 37 || e.which === 39) {\n        const col = e.which === 37 ? tetromino.col - 1 : tetromino.col + 1;\n\n        if (isValidMove(tetromino.matrix, tetromino.row, col)) {\n            tetromino.col = col;\n        }\n        }\n\n        // up arrow key (rotate)\n        if (e.which === 38) {\n        const matrix = rotate(tetromino.matrix);\n        if (isValidMove(matrix, tetromino.row, tetromino.col)) {\n            tetromino.matrix = matrix;\n        }\n        }\n\n        // down arrow key (drop)\n        if (e.which === 40) {\n        const row = tetromino.row + 1;\n\n        if (!isValidMove(tetromino.matrix, row, tetromino.col)) {\n            tetromino.row = row - 1;\n\n            placeTetromino();\n            return;\n        }\n\n        tetromino.row = row;\n        }\n    });\n\n    // start the game\n    rAF = requestAnimationFrame(loop);\n    </script>\n</body>\n</html>\n' > /var/www/html/index.html\n\n"}},"schema_version":0},{"address":"aws_lb.three-tier-app-lb","mode":"managed","type":"aws_lb","name":"three-tier-app-lb","provider_config_key":"aws","expressions":{"internal":{"constant_value":true},"load_balancer_type":{"constant_value":"application"},"name":{"constant_value":"three-tier-app-lb"},"security_groups":{"references":["aws_security_group.three-tier-alb-sg-2.id","aws_security_group.three-tier-alb-sg-2"]},"subnets":{"references":["aws_subnet.three-tier-pvt-sub-1.id","aws_subnet.three-tier-pvt-sub-1","aws_subnet.three-tier-pvt-sub-2.id","aws_subnet.three-tier-pvt-sub-2"]},"tags":{"constant_value":{"Environment":"three-tier-app-lb"}}},"schema_version":0},{"address":"aws_lb.three-tier-web-lb","mode":"managed","type":"aws_lb","name":"three-tier-web-lb","provider_config_key":"aws","expressions":{"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"constant_value":"three-tier-web-lb"},"security_groups":{"references":["aws_security_group.three-tier-alb-sg-1.id","aws_security_group.three-tier-alb-sg-1"]},"subnets":{"references":["aws_subnet.three-tier-pub-sub-1.id","aws_subnet.three-tier-pub-sub-1","aws_subnet.three-tier-pub-sub-2.id","aws_subnet.three-tier-pub-sub-2"]},"tags":{"constant_value":{"Environment":"three-tier-web-lb"}}},"schema_version":0},{"address":"aws_lb_listener.three-tier-app-lb-listner","mode":"managed","type":"aws_lb_listener","name":"three-tier-app-lb-listner","provider_config_key":"aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.three-tier-app-lb-tg.arn","aws_lb_target_group.three-tier-app-lb-tg"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.three-tier-app-lb.arn","aws_lb.three-tier-app-lb"]},"port":{"constant_value":"80"},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_lb_listener.three-tier-web-lb-listner","mode":"managed","type":"aws_lb_listener","name":"three-tier-web-lb-listner","provider_config_key":"aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.three-tier-web-lb-tg.arn","aws_lb_target_group.three-tier-web-lb-tg"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.three-tier-web-lb.arn","aws_lb.three-tier-web-lb"]},"port":{"constant_value":"80"},"protocol":{"constant_value":"HTTP"}},"schema_version":0},{"address":"aws_lb_target_group.three-tier-app-lb-tg","mode":"managed","type":"aws_lb_target_group","name":"three-tier-app-lb-tg","provider_config_key":"aws","expressions":{"health_check":[{"healthy_threshold":{"constant_value":3},"interval":{"constant_value":30},"path":{"constant_value":"/"},"port":{"constant_value":"traffic-port"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":10},"unhealthy_threshold":{"constant_value":3}}],"name":{"constant_value":"three-tier-app-lb-tg"},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":0},{"address":"aws_lb_target_group.three-tier-web-lb-tg","mode":"managed","type":"aws_lb_target_group","name":"three-tier-web-lb-tg","provider_config_key":"aws","expressions":{"health_check":[{"healthy_threshold":{"constant_value":3},"interval":{"constant_value":30},"path":{"constant_value":"/"},"port":{"constant_value":"traffic-port"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":10},"unhealthy_threshold":{"constant_value":3}}],"name":{"constant_value":"three-tier-web-lb-tg"},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":0},{"address":"aws_nat_gateway.three-tier-natgw-01","mode":"managed","type":"aws_nat_gateway","name":"three-tier-natgw-01","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.three-tier-nat-eip.id","aws_eip.three-tier-nat-eip"]},"subnet_id":{"references":["aws_subnet.three-tier-pub-sub-1.id","aws_subnet.three-tier-pub-sub-1"]},"tags":{"references":["var.name"]}},"schema_version":0,"depends_on":["aws_internet_gateway.three-tier-igw"]},{"address":"aws_route_table.three-tier-app-rt","mode":"managed","type":"aws_route_table","name":"three-tier-app-rt","provider_config_key":"aws","expressions":{"route":{"references":["aws_nat_gateway.three-tier-natgw-01.id","aws_nat_gateway.three-tier-natgw-01"]},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":0},{"address":"aws_route_table.three-tier-web-rt","mode":"managed","type":"aws_route_table","name":"three-tier-web-rt","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.three-tier-igw.id","aws_internet_gateway.three-tier-igw"]},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":0},{"address":"aws_route_table_association.three-tier-rt-as-1","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-1","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.three-tier-web-rt.id","aws_route_table.three-tier-web-rt"]},"subnet_id":{"references":["aws_subnet.three-tier-pub-sub-1.id","aws_subnet.three-tier-pub-sub-1"]}},"schema_version":0},{"address":"aws_route_table_association.three-tier-rt-as-2","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-2","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.three-tier-web-rt.id","aws_route_table.three-tier-web-rt"]},"subnet_id":{"references":["aws_subnet.three-tier-pub-sub-2.id","aws_subnet.three-tier-pub-sub-2"]}},"schema_version":0},{"address":"aws_route_table_association.three-tier-rt-as-3","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-3","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.three-tier-app-rt.id","aws_route_table.three-tier-app-rt"]},"subnet_id":{"references":["aws_subnet.three-tier-pvt-sub-1.id","aws_subnet.three-tier-pvt-sub-1"]}},"schema_version":0},{"address":"aws_route_table_association.three-tier-rt-as-4","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-4","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.three-tier-app-rt.id","aws_route_table.three-tier-app-rt"]},"subnet_id":{"references":["aws_subnet.three-tier-pvt-sub-2.id","aws_subnet.three-tier-pvt-sub-2"]}},"schema_version":0},{"address":"aws_route_table_association.three-tier-rt-as-5","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-5","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.three-tier-app-rt.id","aws_route_table.three-tier-app-rt"]},"subnet_id":{"references":["aws_subnet.three-tier-pvt-sub-3.id","aws_subnet.three-tier-pvt-sub-3"]}},"schema_version":0},{"address":"aws_route_table_association.three-tier-rt-as-6","mode":"managed","type":"aws_route_table_association","name":"three-tier-rt-as-6","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.three-tier-app-rt.id","aws_route_table.three-tier-app-rt"]},"subnet_id":{"references":["aws_subnet.three-tier-pvt-sub-4.id","aws_subnet.three-tier-pvt-sub-4"]}},"schema_version":0},{"address":"aws_security_group.three-tier-alb-sg-1","mode":"managed","type":"aws_security_group","name":"three-tier-alb-sg-1","provider_config_key":"aws","expressions":{"description":{"constant_value":"load balancer security group for web tier"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"name":{"constant_value":"three-tier-alb-sg-1"},"tags":{"constant_value":{"Name":"three-tier-alb-sg-1"}},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1,"depends_on":["aws_vpc.three-tier-vpc"]},{"address":"aws_security_group.three-tier-alb-sg-2","mode":"managed","type":"aws_security_group","name":"three-tier-alb-sg-2","provider_config_key":"aws","expressions":{"description":{"constant_value":"load balancer security group for app tier"},"ingress":{"references":["aws_security_group.three-tier-alb-sg-1.id","aws_security_group.three-tier-alb-sg-1"]},"name":{"constant_value":"three-tier-alb-sg-2"},"tags":{"constant_value":{"Name":"three-tier-alb-sg-2"}},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1,"depends_on":["aws_vpc.three-tier-vpc"]},{"address":"aws_security_group.three-tier-db-sg","mode":"managed","type":"aws_security_group","name":"three-tier-db-sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"allow traffic from app tier"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_security_group.three-tier-ec2-asg-sg-app.id","aws_security_group.three-tier-ec2-asg-sg-app"]},"name":{"constant_value":"three-tier-db-sg"},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1},{"address":"aws_security_group.three-tier-ec2-asg-sg","mode":"managed","type":"aws_security_group","name":"three-tier-ec2-asg-sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow traffic from VPC"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":null,"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":22}]},"name":{"constant_value":"three-tier-ec2-asg-sg"},"tags":{"constant_value":{"Name":"three-tier-ec2-asg-sg"}},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1,"depends_on":["aws_vpc.three-tier-vpc"]},{"address":"aws_security_group.three-tier-ec2-asg-sg-app","mode":"managed","type":"aws_security_group","name":"three-tier-ec2-asg-sg-app","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow traffic from web tier"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_security_group.three-tier-ec2-asg-sg.id","aws_security_group.three-tier-ec2-asg-sg","aws_security_group.three-tier-ec2-asg-sg.id","aws_security_group.three-tier-ec2-asg-sg","aws_security_group.three-tier-ec2-asg-sg.id","aws_security_group.three-tier-ec2-asg-sg"]},"name":{"constant_value":"three-tier-ec2-asg-sg-app"},"tags":{"constant_value":{"Name":"three-tier-ec2-asg-sg-app"}},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1,"depends_on":["aws_vpc.three-tier-vpc"]},{"address":"aws_subnet.three-tier-pub-sub-1","mode":"managed","type":"aws_subnet","name":"three-tier-pub-sub-1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"constant_value":"10.0.0.0/28"},"map_public_ip_on_launch":{"constant_value":"true"},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1},{"address":"aws_subnet.three-tier-pub-sub-2","mode":"managed","type":"aws_subnet","name":"three-tier-pub-sub-2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"constant_value":"10.0.0.16/28"},"map_public_ip_on_launch":{"constant_value":"true"},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1},{"address":"aws_subnet.three-tier-pvt-sub-1","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"constant_value":"10.0.0.32/28"},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1},{"address":"aws_subnet.three-tier-pvt-sub-2","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"constant_value":"10.0.0.48/28"},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1},{"address":"aws_subnet.three-tier-pvt-sub-3","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-3","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"constant_value":"10.0.0.64/28"},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1},{"address":"aws_subnet.three-tier-pvt-sub-4","mode":"managed","type":"aws_subnet","name":"three-tier-pvt-sub-4","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.region"]},"cidr_block":{"constant_value":"10.0.0.80/28"},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["var.name"]},"vpc_id":{"references":["aws_vpc.three-tier-vpc.id","aws_vpc.three-tier-vpc"]}},"schema_version":1},{"address":"aws_vpc.three-tier-vpc","mode":"managed","type":"aws_vpc","name":"three-tier-vpc","provider_config_key":"aws","expressions":{"cidr_block":{"constant_value":"10.0.0.0/16"},"tags":{"constant_value":{"Name":"three-tier-vpc"}}},"schema_version":1},{"address":"data.aws_ami.ubuntu","mode":"data","type":"aws_ami","name":"ubuntu","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["al2023-ami-2023.4.20240513.0-kernel-6.1-x86_64"]}}],"most_recent":{"constant_value":true}},"schema_version":0},{"address":"data.aws_key_pair.tfc-demo","mode":"data","type":"aws_key_pair","name":"tfc-demo","provider_config_key":"aws","expressions":{"include_public_key":{"constant_value":true},"key_name":{"constant_value":"tfc-demo"}},"schema_version":0}],"variables":{"name":{"default":"three-tier-nhvr","description":"Name to tag resources with"},"region":{"default":"ap-southeast-2","description":"Region to deploy resources into"},"tfe-org-name":{"default":"samuellee-dev"}}}}},"graph":"digraph {\n\tcompound = \"true\"\n\tnewrank = \"true\"\n\tsubgraph \"root\" {\n\t\t\"[root] aws_autoscaling_attachment.three-tier-web-asattach (expand)\" [label = \"aws_autoscaling_attachment.three-tier-web-asattach\", shape = \"box\"]\n\t\t\"[root] aws_autoscaling_group.three-tier-web-asg (expand)\" [label = \"aws_autoscaling_group.three-tier-web-asg\", shape = \"box\"]\n\t\t\"[root] aws_eip.three-tier-nat-eip (expand)\" [label = \"aws_eip.three-tier-nat-eip\", shape = \"box\"]\n\t\t\"[root] aws_internet_gateway.three-tier-igw (expand)\" [label = \"aws_internet_gateway.three-tier-igw\", shape = \"box\"]\n\t\t\"[root] aws_launch_configuration.three-tier-web-lconfig (expand)\" [label = \"aws_launch_configuration.three-tier-web-lconfig\", shape = \"box\"]\n\t\t\"[root] aws_lb.three-tier-app-lb (expand)\" [label = \"aws_lb.three-tier-app-lb\", shape = \"box\"]\n\t\t\"[root] aws_lb.three-tier-web-lb (expand)\" [label = \"aws_lb.three-tier-web-lb\", shape = \"box\"]\n\t\t\"[root] aws_lb_listener.three-tier-app-lb-listner (expand)\" [label = \"aws_lb_listener.three-tier-app-lb-listner\", shape = \"box\"]\n\t\t\"[root] aws_lb_listener.three-tier-web-lb-listner (expand)\" [label = \"aws_lb_listener.three-tier-web-lb-listner\", shape = \"box\"]\n\t\t\"[root] aws_lb_target_group.three-tier-app-lb-tg (expand)\" [label = \"aws_lb_target_group.three-tier-app-lb-tg\", shape = \"box\"]\n\t\t\"[root] aws_lb_target_group.three-tier-web-lb-tg (expand)\" [label = \"aws_lb_target_group.three-tier-web-lb-tg\", shape = \"box\"]\n\t\t\"[root] aws_nat_gateway.three-tier-natgw-01 (expand)\" [label = \"aws_nat_gateway.three-tier-natgw-01\", shape = \"box\"]\n\t\t\"[root] aws_route_table.three-tier-app-rt (expand)\" [label = \"aws_route_table.three-tier-app-rt\", shape = \"box\"]\n\t\t\"[root] aws_route_table.three-tier-web-rt (expand)\" [label = \"aws_route_table.three-tier-web-rt\", shape = \"box\"]\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-1 (expand)\" [label = \"aws_route_table_association.three-tier-rt-as-1\", shape = \"box\"]\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-2 (expand)\" [label = \"aws_route_table_association.three-tier-rt-as-2\", shape = \"box\"]\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-3 (expand)\" [label = \"aws_route_table_association.three-tier-rt-as-3\", shape = \"box\"]\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-4 (expand)\" [label = \"aws_route_table_association.three-tier-rt-as-4\", shape = \"box\"]\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-5 (expand)\" [label = \"aws_route_table_association.three-tier-rt-as-5\", shape = \"box\"]\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-6 (expand)\" [label = \"aws_route_table_association.three-tier-rt-as-6\", shape = \"box\"]\n\t\t\"[root] aws_security_group.three-tier-alb-sg-1 (expand)\" [label = \"aws_security_group.three-tier-alb-sg-1\", shape = \"box\"]\n\t\t\"[root] aws_security_group.three-tier-alb-sg-2 (expand)\" [label = \"aws_security_group.three-tier-alb-sg-2\", shape = \"box\"]\n\t\t\"[root] aws_security_group.three-tier-db-sg (expand)\" [label = \"aws_security_group.three-tier-db-sg\", shape = \"box\"]\n\t\t\"[root] aws_security_group.three-tier-ec2-asg-sg (expand)\" [label = \"aws_security_group.three-tier-ec2-asg-sg\", shape = \"box\"]\n\t\t\"[root] aws_security_group.three-tier-ec2-asg-sg-app (expand)\" [label = \"aws_security_group.three-tier-ec2-asg-sg-app\", shape = \"box\"]\n\t\t\"[root] aws_subnet.three-tier-pub-sub-1 (expand)\" [label = \"aws_subnet.three-tier-pub-sub-1\", shape = \"box\"]\n\t\t\"[root] aws_subnet.three-tier-pub-sub-2 (expand)\" [label = \"aws_subnet.three-tier-pub-sub-2\", shape = \"box\"]\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-1 (expand)\" [label = \"aws_subnet.three-tier-pvt-sub-1\", shape = \"box\"]\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-2 (expand)\" [label = \"aws_subnet.three-tier-pvt-sub-2\", shape = \"box\"]\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-3 (expand)\" [label = \"aws_subnet.three-tier-pvt-sub-3\", shape = \"box\"]\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-4 (expand)\" [label = \"aws_subnet.three-tier-pvt-sub-4\", shape = \"box\"]\n\t\t\"[root] aws_vpc.three-tier-vpc (expand)\" [label = \"aws_vpc.three-tier-vpc\", shape = \"box\"]\n\t\t\"[root] data.aws_ami.ubuntu (expand)\" [label = \"data.aws_ami.ubuntu\", shape = \"box\"]\n\t\t\"[root] data.aws_key_pair.tfc-demo (expand)\" [label = \"data.aws_key_pair.tfc-demo\", shape = \"box\"]\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" [label = \"provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\", shape = \"diamond\"]\n\t\t\"[root] var.name\" [label = \"var.name\", shape = \"note\"]\n\t\t\"[root] var.region\" [label = \"var.region\", shape = \"note\"]\n\t\t\"[root] var.tfe-org-name\" [label = \"var.tfe-org-name\", shape = \"note\"]\n\t\t\"[root] aws_autoscaling_attachment.three-tier-web-asattach (expand)\" -> \"[root] aws_autoscaling_group.three-tier-web-asg (expand)\"\n\t\t\"[root] aws_autoscaling_attachment.three-tier-web-asattach (expand)\" -> \"[root] aws_lb_target_group.three-tier-web-lb-tg (expand)\"\n\t\t\"[root] aws_autoscaling_group.three-tier-web-asg (expand)\" -> \"[root] aws_launch_configuration.three-tier-web-lconfig (expand)\"\n\t\t\"[root] aws_autoscaling_group.three-tier-web-asg (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-1 (expand)\"\n\t\t\"[root] aws_autoscaling_group.three-tier-web-asg (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-2 (expand)\"\n\t\t\"[root] aws_eip.three-tier-nat-eip (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] aws_internet_gateway.three-tier-igw (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_internet_gateway.three-tier-igw (expand)\" -> \"[root] var.name\"\n\t\t\"[root] aws_launch_configuration.three-tier-web-lconfig (expand)\" -> \"[root] aws_security_group.three-tier-ec2-asg-sg (expand)\"\n\t\t\"[root] aws_launch_configuration.three-tier-web-lconfig (expand)\" -> \"[root] data.aws_ami.ubuntu (expand)\"\n\t\t\"[root] aws_launch_configuration.three-tier-web-lconfig (expand)\" -> \"[root] data.aws_key_pair.tfc-demo (expand)\"\n\t\t\"[root] aws_lb.three-tier-app-lb (expand)\" -> \"[root] aws_security_group.three-tier-alb-sg-2 (expand)\"\n\t\t\"[root] aws_lb.three-tier-app-lb (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-1 (expand)\"\n\t\t\"[root] aws_lb.three-tier-app-lb (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-2 (expand)\"\n\t\t\"[root] aws_lb.three-tier-web-lb (expand)\" -> \"[root] aws_security_group.three-tier-alb-sg-1 (expand)\"\n\t\t\"[root] aws_lb.three-tier-web-lb (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-1 (expand)\"\n\t\t\"[root] aws_lb.three-tier-web-lb (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-2 (expand)\"\n\t\t\"[root] aws_lb_listener.three-tier-app-lb-listner (expand)\" -> \"[root] aws_lb.three-tier-app-lb (expand)\"\n\t\t\"[root] aws_lb_listener.three-tier-app-lb-listner (expand)\" -> \"[root] aws_lb_target_group.three-tier-app-lb-tg (expand)\"\n\t\t\"[root] aws_lb_listener.three-tier-web-lb-listner (expand)\" -> \"[root] aws_lb.three-tier-web-lb (expand)\"\n\t\t\"[root] aws_lb_listener.three-tier-web-lb-listner (expand)\" -> \"[root] aws_lb_target_group.three-tier-web-lb-tg (expand)\"\n\t\t\"[root] aws_lb_target_group.three-tier-app-lb-tg (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_lb_target_group.three-tier-web-lb-tg (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_nat_gateway.three-tier-natgw-01 (expand)\" -> \"[root] aws_eip.three-tier-nat-eip (expand)\"\n\t\t\"[root] aws_nat_gateway.three-tier-natgw-01 (expand)\" -> \"[root] aws_internet_gateway.three-tier-igw (expand)\"\n\t\t\"[root] aws_nat_gateway.three-tier-natgw-01 (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-1 (expand)\"\n\t\t\"[root] aws_route_table.three-tier-app-rt (expand)\" -> \"[root] aws_nat_gateway.three-tier-natgw-01 (expand)\"\n\t\t\"[root] aws_route_table.three-tier-web-rt (expand)\" -> \"[root] aws_internet_gateway.three-tier-igw (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-1 (expand)\" -> \"[root] aws_route_table.three-tier-web-rt (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-1 (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-1 (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-2 (expand)\" -> \"[root] aws_route_table.three-tier-web-rt (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-2 (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-2 (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-3 (expand)\" -> \"[root] aws_route_table.three-tier-app-rt (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-3 (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-1 (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-4 (expand)\" -> \"[root] aws_route_table.three-tier-app-rt (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-4 (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-2 (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-5 (expand)\" -> \"[root] aws_route_table.three-tier-app-rt (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-5 (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-3 (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-6 (expand)\" -> \"[root] aws_route_table.three-tier-app-rt (expand)\"\n\t\t\"[root] aws_route_table_association.three-tier-rt-as-6 (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-4 (expand)\"\n\t\t\"[root] aws_security_group.three-tier-alb-sg-1 (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_security_group.three-tier-alb-sg-2 (expand)\" -> \"[root] aws_security_group.three-tier-alb-sg-1 (expand)\"\n\t\t\"[root] aws_security_group.three-tier-db-sg (expand)\" -> \"[root] aws_security_group.three-tier-ec2-asg-sg-app (expand)\"\n\t\t\"[root] aws_security_group.three-tier-ec2-asg-sg (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_security_group.three-tier-ec2-asg-sg-app (expand)\" -> \"[root] aws_security_group.three-tier-ec2-asg-sg (expand)\"\n\t\t\"[root] aws_subnet.three-tier-pub-sub-1 (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_subnet.three-tier-pub-sub-1 (expand)\" -> \"[root] var.name\"\n\t\t\"[root] aws_subnet.three-tier-pub-sub-2 (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_subnet.three-tier-pub-sub-2 (expand)\" -> \"[root] var.name\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-1 (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-1 (expand)\" -> \"[root] var.name\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-2 (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-2 (expand)\" -> \"[root] var.name\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-3 (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-3 (expand)\" -> \"[root] var.name\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-4 (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] aws_subnet.three-tier-pvt-sub-4 (expand)\" -> \"[root] var.name\"\n\t\t\"[root] aws_vpc.three-tier-vpc (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] data.aws_ami.ubuntu (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] data.aws_key_pair.tfc-demo (expand)\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\"\n\t\t\"[root] output.aws-key-pair-id (expand)\" -> \"[root] data.aws_key_pair.tfc-demo (expand)\"\n\t\t\"[root] output.aws-key-pair-name (expand)\" -> \"[root] data.aws_key_pair.tfc-demo (expand)\"\n\t\t\"[root] output.aws-lb-app-dns-name (expand)\" -> \"[root] aws_lb.three-tier-app-lb (expand)\"\n\t\t\"[root] output.aws-lb-web-dns-name (expand)\" -> \"[root] aws_lb.three-tier-web-lb (expand)\"\n\t\t\"[root] output.aws-three-tier-alb-sg-1-id (expand)\" -> \"[root] aws_security_group.three-tier-alb-sg-1 (expand)\"\n\t\t\"[root] output.aws-three-tier-alb-sg-2-id (expand)\" -> \"[root] aws_security_group.three-tier-alb-sg-2 (expand)\"\n\t\t\"[root] output.aws-three-tier-app-lb-id (expand)\" -> \"[root] aws_lb.three-tier-app-lb (expand)\"\n\t\t\"[root] output.aws-three-tier-app-lb-listner-id (expand)\" -> \"[root] aws_lb_listener.three-tier-app-lb-listner (expand)\"\n\t\t\"[root] output.aws-three-tier-app-lb-tg-arn (expand)\" -> \"[root] aws_lb_target_group.three-tier-app-lb-tg (expand)\"\n\t\t\"[root] output.aws-three-tier-app-rt-id (expand)\" -> \"[root] aws_route_table.three-tier-app-rt (expand)\"\n\t\t\"[root] output.aws-three-tier-db-sg-id (expand)\" -> \"[root] aws_security_group.three-tier-db-sg (expand)\"\n\t\t\"[root] output.aws-three-tier-ec2-asg-sg-app-id (expand)\" -> \"[root] aws_security_group.three-tier-ec2-asg-sg-app (expand)\"\n\t\t\"[root] output.aws-three-tier-ec2-asg-sg-id (expand)\" -> \"[root] aws_security_group.three-tier-ec2-asg-sg (expand)\"\n\t\t\"[root] output.aws-three-tier-igw-id (expand)\" -> \"[root] aws_internet_gateway.three-tier-igw (expand)\"\n\t\t\"[root] output.aws-three-tier-nat-eip-id (expand)\" -> \"[root] aws_eip.three-tier-nat-eip (expand)\"\n\t\t\"[root] output.aws-three-tier-natgw-01-id (expand)\" -> \"[root] aws_nat_gateway.three-tier-natgw-01 (expand)\"\n\t\t\"[root] output.aws-three-tier-pub-sub-1-id (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-1 (expand)\"\n\t\t\"[root] output.aws-three-tier-pub-sub-2-id (expand)\" -> \"[root] aws_subnet.three-tier-pub-sub-2 (expand)\"\n\t\t\"[root] output.aws-three-tier-pvt-sub-1-id (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-1 (expand)\"\n\t\t\"[root] output.aws-three-tier-pvt-sub-2-id (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-2 (expand)\"\n\t\t\"[root] output.aws-three-tier-pvt-sub-3-id (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-3 (expand)\"\n\t\t\"[root] output.aws-three-tier-pvt-sub-4-id (expand)\" -> \"[root] aws_subnet.three-tier-pvt-sub-4 (expand)\"\n\t\t\"[root] output.aws-three-tier-vpc-id (expand)\" -> \"[root] aws_vpc.three-tier-vpc (expand)\"\n\t\t\"[root] output.aws-three-tier-web-lb-dns-name (expand)\" -> \"[root] aws_lb.three-tier-web-lb (expand)\"\n\t\t\"[root] output.aws-three-tier-web-lb-id (expand)\" -> \"[root] aws_lb.three-tier-web-lb (expand)\"\n\t\t\"[root] output.aws-three-tier-web-lb-listner-id (expand)\" -> \"[root] aws_lb_listener.three-tier-web-lb-listner (expand)\"\n\t\t\"[root] output.aws-three-tier-web-lb-tg-arn (expand)\" -> \"[root] aws_lb_target_group.three-tier-web-lb-tg (expand)\"\n\t\t\"[root] output.aws-three-tier-web-rt-id (expand)\" -> \"[root] aws_route_table.three-tier-web-rt (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_autoscaling_attachment.three-tier-web-asattach (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_lb_listener.three-tier-app-lb-listner (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_lb_listener.three-tier-web-lb-listner (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_route_table_association.three-tier-rt-as-1 (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_route_table_association.three-tier-rt-as-2 (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_route_table_association.three-tier-rt-as-3 (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_route_table_association.three-tier-rt-as-4 (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_route_table_association.three-tier-rt-as-5 (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_route_table_association.three-tier-rt-as-6 (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\" -> \"[root] aws_security_group.three-tier-db-sg (expand)\"\n\t\t\"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"]\" -> \"[root] var.region\"\n\t\t\"[root] root\" -> \"[root] output.aws-key-pair-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-key-pair-name (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-lb-app-dns-name (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-lb-web-dns-name (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-alb-sg-1-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-alb-sg-2-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-app-lb-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-app-lb-listner-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-app-lb-tg-arn (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-app-rt-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-db-sg-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-ec2-asg-sg-app-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-ec2-asg-sg-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-igw-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-nat-eip-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-natgw-01-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-pub-sub-1-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-pub-sub-2-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-pvt-sub-1-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-pvt-sub-2-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-pvt-sub-3-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-pvt-sub-4-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-vpc-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-web-lb-dns-name (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-web-lb-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-web-lb-listner-id (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-web-lb-tg-arn (expand)\"\n\t\t\"[root] root\" -> \"[root] output.aws-three-tier-web-rt-id (expand)\"\n\t\t\"[root] root\" -> \"[root] provider[\\\"registry.terraform.io/hashicorp/aws\\\"] (close)\"\n\t\t\"[root] root\" -> \"[root] var.tfe-org-name\"\n\t}\n}\n","detailed":false,"debug":false,"showUnchanged":false,"ci":true,"opacityFull":false,"states":[]}